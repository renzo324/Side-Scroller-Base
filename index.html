<!DOCTYPE html>
<html>
<head>
	<title>Test</title>
<style>
#box{
	background: #000000;
	width: 50px;
	height: 50px;
	position: absolute;
	top:190px;
	left:150px;
	z-index: 9999;
	/*border-radius: 100px;*/
	background: url('OPM.gif');
	transform: scaleX(1);
}
#env{
	width: 100%;
	height: 300px;
	border: 1px solid #000000;
	background: url('bg2.jpg');
    background-repeat: repeat-x;
    background-size: 300px 300px;
}

</style>
</head>
<body>
<div id="env">
<div id="box"></div>
</div>
<audio data-key="65" src="one-punch.mp3"></audio>
<script>
var y=0;
var x=0;
var bgX=0;
var i;
window.addEventListener("keydown", moveBox, false);

function moveBox(event){
	var e = event.which || event.keyCode;
	console.log(e);
	x = parseInt(document.getElementById('box').style.left) || 150;
	y = parseInt(document.getElementById('box').style.top) || 190;
	bgX = parseInt(document.getElementById('env').style.backgroundPosition) || 0;

	// if(e==38) y-=10;
	// if(e==40) y+=10;
	if(e==37) {
		x-=10;
		document.getElementById('box').style.transform = "scaleX(-1)";
	}
	if(e==39) {
		x+=10;
		document.getElementById('box').style.transform = "scaleX(1)";
	}
	if(e==32){
document.getElementById("box").animate([
  // keyframes
  { transform: 'translateY(0px)' }, 
  { transform: 'translateY(-30px)' },
  { transform: 'translateY(0px)' }
], { 
  // timing options
  duration: 200,
  iterations: 1
});
	}
	if(x<=10) {
		x=10;
		bgX+=10;
		document.getElementById('env').style.backgroundPosition = bgX+'px center';
	}
	if(x>=270) {
		x=270;
		bgX-=10;
		document.getElementById('env').style.backgroundPosition = bgX+'px center';
	}

	if(y<=10) y=10;
	if(y>=300) y=300;
	document.getElementById('box').style.left=x+"px";
	document.getElementById('box').style.top=y+"px";
}
</script>
</body>
</html>